<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1" />
    <link rel="stylesheet" href="styles.css">
    <title>Pix My Life</title>
</head>


<body>

</body>

    <div class="container"></div>

    <div class="tools">

        <div class="tools--drawing">
            <input type="color" id="color-picker">
            <button id="pen"></button>
            <button id="eraser"></button>
            <button id="clear"></button>
        </div>

        <div class="slidecontainer">
            <input type="range" min="1" max="64" value="16" class="slider" id="dim">
            <div class="slidevalue"><span id="slideoutput"></span></div>
        </div>
        <div class="tools--bg">
            <!-- 
                toggle bg img
                upload bg img
                delete bg img
             -->
        </div>
    </div>


    <script>

        const dimensions = document.querySelector("#dim");
        const slideoutput = document.querySelector("#slideoutput");

        const container = document.querySelector(".container");

        const color = document.querySelector("#color-picker");
        const pen = document.querySelector("#pen");
        const eraser = document.querySelector("#eraser");
        const clearBtn = document.querySelector("#clear");


        function initPixels(){
            container.textContent = '';

            container.style["grid-template-rows"] = "repeat("+dimensions.value+", 1fr)"
            container.style["grid-template-columns"] = "repeat("+dimensions.value+", 1fr)"
            
            for(let i=1; i<=dimensions.value; i++){ //row
                for(let j=1; j<=dimensions.value; j++){ //col

                    let pixel = document.createElement("div");
                    pixel.classList.add("pixel");
                    pixel.style["border"] = "1px solid rgba(233, 241, 247, 0.5)";

                    pixel.style["grid-row"] = i +" / span "+ 1;
                    pixel.style["grid-column"] = j +" / span "+ 1;

                    container.appendChild(pixel);

                    pixel.addEventListener("click", () => {
                        pixel.style["background-color"] = color.value;
                        pixel.style["border-color"] = color.value;
                    })
                }
            }
        }

        function setDim(){
            console.log("setDim")
            slideoutput.textContent = dimensions.value +" x "+ dimensions.value;
            initPixels();
        }

        function clearCanvas(){
            console.log("hi")
            let pixels = document.querySelectorAll(".pixel");
            console.log(pixels)
            for(let p of pixels){
                p.style["background-color"] = "transparent";
                p.style["border"] = "1px solid rgba(233, 241, 247, 0.5)";
            }
        }


        clearBtn.addEventListener("click", clearCanvas);


        setDim();
        dimensions.addEventListener("click", setDim);

    </script>

</html>